<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#1e3c72">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Wai Myo GBK Mobile</title>
    <style>
        /* Android Phone Portrait Only - Premium Design */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Pyidaungsu', 'Noto Sans Myanmar', 'Roboto', 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: #f8fafc;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Main Container - Phone Portrait Only */
        .phone-container {
            max-width: 480px;
            width: 100%;
            margin: 0 auto;
            padding: 12px;
            padding-bottom: 90px;
            position: relative;
            background: #f8fafc;
        }

        /* Status Bar (Android-like) */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 4px 16px 4px;
            color: #1e293b;
            font-size: 14px;
            font-weight: 500;
        }

        .status-bar-left {
            display: flex;
            gap: 4px;
        }

        .status-bar-right {
            display: flex;
            gap: 8px;
        }

        /* Header - Modern Card */
        .header {
            background: linear-gradient(145deg, #1e3c72, #2a4a8a);
            color: white;
            padding: 20px;
            border-radius: 32px;
            margin-bottom: 16px;
            box-shadow: 0 10px 25px rgba(30, 60, 114, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        .date-picker {
            display: flex;
            gap: 8px;
        }

        .date-picker input {
            flex: 2;
            padding: 16px;
            border: none;
            border-radius: 24px;
            font-size: 15px;
            font-family: inherit;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .date-picker button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 24px;
            font-weight: 700;
            font-size: 15px;
            background: #ffd700;
            color: #1e3c72;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
            transition: all 0.15s;
        }

        .date-picker button:active {
            transform: scale(0.96);
            background: #ffed4a;
        }

        .date-picker button:last-child {
            background: #38ef7d;
            color: #1e3c72;
        }

        /* Cash Balance - Premium Card */
        .cash-balance {
            background: linear-gradient(145deg, #0f5e4a, #11998e);
            color: white;
            padding: 20px;
            border-radius: 32px;
            margin-bottom: 20px;
            box-shadow: 0 15px 30px rgba(17, 153, 142, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .cash-title {
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0.9;
            margin-bottom: 8px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .cash-amount {
            font-size: 42px;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 16px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .opening-balance {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 16px;
            background: rgba(0, 0, 0, 0.15);
            padding: 10px 16px;
            border-radius: 30px;
            display: inline-block;
        }

        .cash-details {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            background: rgba(0, 0, 0, 0.2);
            padding: 16px;
            border-radius: 28px;
            margin-bottom: 16px;
            backdrop-filter: blur(5px);
        }

        .cash-detail-item {
            text-align: center;
            flex: 1;
        }

        .cash-detail-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .cash-detail-value {
            font-size: 20px;
            font-weight: 700;
        }

        .reconcile-btn {
            width: 100%;
            padding: 18px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            border-radius: 40px;
            color: white;
            font-weight: 700;
            font-size: 16px;
            backdrop-filter: blur(10px);
            transition: all 0.15s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .reconcile-btn:active {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0.98);
        }

        /* Quick Actions Grid */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-action-btn {
            background: white;
            border: none;
            border-radius: 24px;
            padding: 16px 4px;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            color: #1e3c72;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
            transition: all 0.15s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .quick-action-btn span {
            font-size: 22px;
        }

        .quick-action-btn:active {
            transform: scale(0.94);
            background: #f1f5f9;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Bottom Navigation - Android Style */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 480px;
            margin: 0 auto;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 12px 8px;
            padding-bottom: calc(12px + env(safe-area-inset-bottom));
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            border-radius: 30px 30px 0 0;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.98);
        }

        .bottom-nav-btn {
            flex: 1;
            background: transparent;
            border: none;
            padding: 8px 4px;
            border-radius: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            color: #64748b;
            font-weight: 600;
            transition: all 0.15s;
        }

        .bottom-nav-btn span {
            font-size: 22px;
        }

        .bottom-nav-btn.active {
            color: #1e3c72;
            background: #e8edff;
            font-weight: 700;
        }

        .bottom-nav-btn:active {
            background: #f1f5f9;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0.5; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content.active {
            display: block;
        }

        /* Section Title */
        .section-title {
            font-size: 22px;
            color: #1e3c72;
            margin: 20px 0 16px 0;
            padding-bottom: 12px;
            border-bottom: 3px solid #e0e7ff;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 18px;
            border-radius: 24px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
        }

        .stat-card:active {
            transform: scale(0.98);
            background: #f8fafc;
        }

        .stat-label {
            color: #64748b;
            font-size: 13px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .stat-number {
            font-size: 26px;
            font-weight: 800;
            color: #1e293b;
            line-height: 1.2;
        }

        .stat-number.income {
            color: #059669;
        }

        .stat-number.expense {
            color: #dc2626;
        }

        .stat-number.profit {
            color: #2563eb;
        }

        /* Forms */
        .form-section {
            background: white;
            padding: 20px;
            border-radius: 28px;
            border: 1px solid #e2e8f0;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
        }

        .form-section h3 {
            font-size: 18px;
            color: #1e3c72;
            margin-bottom: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #475569;
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 20px;
            font-size: 16px;
            font-family: inherit;
            background: white;
            transition: all 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 4px rgba(30, 60, 114, 0.15);
        }

        .btn {
            width: 100%;
            padding: 18px;
            background: #1e3c72;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 700;
            box-shadow: 0 8px 18px rgba(30, 60, 114, 0.3);
            transition: all 0.15s;
            margin-top: 8px;
        }

        .btn:active {
            transform: scale(0.97);
            background: #2a4a8a;
        }

        .btn-sm {
            padding: 14px;
            font-size: 15px;
        }

        .btn-success {
            background: #059669;
        }

        .btn-danger {
            background: #dc2626;
        }

        /* Cost Breakdown */
        .cost-breakdown {
            background: #f8fafc;
            padding: 16px;
            border-radius: 22px;
            margin: 16px 0;
            border: 2px solid #e2e8f0;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed #cbd5e1;
            font-size: 15px;
        }

        .cost-item input {
            width: 120px;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            text-align: right;
        }

        .cost-total {
            font-weight: 800;
            border-bottom: none;
            font-size: 17px;
            color: #1e3c72;
            padding-top: 15px;
        }

        .profit-display {
            background: #e0f2fe;
            padding: 18px;
            border-radius: 22px;
            margin: 16px 0;
            border: 2px solid #bae6fd;
        }

        .profit-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
            font-weight: 600;
        }

        .profit-value {
            color: #059669;
            font-weight: 800;
            font-size: 24px;
        }

        /* Filter Section */
        .filter-section {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }

        .filter-input {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 30px;
            font-size: 14px;
            background: white;
        }

        /* Table - Horizontal Scroll */
        .table-responsive {
            overflow-x: auto;
            border-radius: 22px;
            border: 2px solid #e2e8f0;
            background: white;
            -webkit-overflow-scrolling: touch;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        th {
            background: #f1f5f9;
            padding: 16px 12px;
            text-align: left;
            font-weight: 700;
            color: #334155;
            font-size: 13px;
            white-space: nowrap;
        }

        td {
            padding: 16px 12px;
            border-bottom: 1px solid #e2e8f0;
            color: #1e293b;
            font-size: 13px;
        }

        .action-btns {
            display: flex;
            gap: 6px;
        }

        .action-btn {
            padding: 8px 14px;
            border: none;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            min-width: 55px;
        }

        .action-btn:active {
            transform: scale(0.92);
        }

        .edit-btn {
            background: #2563eb;
            color: white;
        }

        .delete-btn {
            background: #dc2626;
            color: white;
        }

        /* Badges */
        .badge {
            padding: 6px 14px;
            border-radius: 40px;
            font-size: 11px;
            font-weight: 700;
            display: inline-block;
        }

        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-progress {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-completed {
            background: #d1fae5;
            color: #065f46;
        }

        /* Report Cards */
        .report-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .report-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 22px;
            padding: 18px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
        }

        .report-card:active {
            transform: scale(0.98);
        }

        .report-card-title {
            color: #64748b;
            font-size: 12px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .report-card-value {
            font-size: 24px;
            font-weight: 800;
            color: #1e293b;
        }

        /* Modal - Android Style */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            padding: 16px;
            backdrop-filter: blur(8px);
            align-items: flex-end;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            width: 100%;
            max-width: 480px;
            border-radius: 36px 36px 0 0;
            padding: 28px 20px;
            animation: slideUp 0.3s ease;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 22px;
            color: #1e3c72;
            font-weight: 700;
        }

        .close {
            font-size: 35px;
            color: #94a3b8;
            padding: 0 10px;
        }

        .close:active {
            color: #475569;
        }

        /* Alert */
        .alert {
            position: fixed;
            top: 20px;
            left: 12px;
            right: 12px;
            max-width: 480px;
            margin: 0 auto;
            padding: 18px 20px;
            border-radius: 30px;
            display: none;
            z-index: 3000;
            text-align: center;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid white;
        }

        .alert.success {
            background: #d1fae5;
            color: #065f46;
        }

        .alert.error {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 110px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background: #1e3c72;
            color: white;
            border: none;
            box-shadow: 0 8px 25px rgba(30, 60, 114, 0.5);
            font-size: 28px;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 900;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.15s;
        }

        .fab:active {
            transform: scale(0.9);
            background: #2a4a8a;
        }

        /* Loading Skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f2f5 25%, #e0e2e5 50%, #f0f2f5 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 12px;
            height: 50px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Pull to Refresh */
        .ptr-hint {
            text-align: center;
            padding: 10px;
            color: #94a3b8;
            font-size: 12px;
        }

        /* Safe Area */
        @supports (padding-top: env(safe-area-inset-top)) {
            .phone-container {
                padding-top: env(safe-area-inset-top);
                padding-bottom: calc(90px + env(safe-area-inset-bottom));
            }
            
            .bottom-nav {
                padding-bottom: calc(12px + env(safe-area-inset-bottom));
            }
        }

        /* No Select */
        .no-select {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* Additional Costs */
        #additionalCosts .cost-item {
            background: #f1f5f9;
            padding: 10px 15px;
            border-radius: 18px;
            margin-bottom: 8px;
            border: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        

        <!-- Pull to Refresh Hint -->
        <div class="ptr-hint no-select">â†“ á€¡á€±á€¬á€€á€ºá€†á€½á€²á€•á€« â†’ á€•á€¼á€”á€ºá€…á€á€„á€ºá€›á€”á€º</div>

        <!-- Header -->
        <div class="header no-select">
            <h1>
                <span>ğŸ“±</span>
                <span>Wai Myo Mobile GBK</span>
            </h1>
            <div class="date-picker">
                <input type="date" id="datePicker" value="2026-02-24">
                <button onclick="loadDailyData()">á€€á€¼á€Šá€·á€º</button>
                <button onclick="setToday()" style="background: #38ef7d;">á€šá€”á€±á€·</button>
            </div>
        </div>

        <!-- Cash Balance -->
        <div class="cash-balance no-select">
            <div>
                <div class="cash-title">ğŸ’° á€šá€”á€±á€·á€œá€€á€ºá€€á€»á€”á€º</div>
                <div class="cash-amount" id="cashBalance">0 á€€á€»á€•á€º</div>
                <div class="opening-balance">
                    á€¡á€–á€½á€„á€·á€º: <span id="openingBalanceDisplay">0 á€€á€»á€•á€º</span>
                </div>
            </div>
            <div class="cash-details">
                <div class="cash-detail-item">
                    <div class="cash-detail-label">á€á€„á€ºá€„á€½á€±</div>
                    <div class="cash-detail-value" id="cashIncome">0</div>
                </div>
                <div class="cash-detail-item">
                    <div class="cash-detail-label">á€¡á€á€¯á€¶á€¸</div>
                    <div class="cash-detail-value" id="cashExpense">0</div>
                </div>
                <div class="cash-detail-item">
                    <div class="cash-detail-label">á€¡á€™á€¼á€á€º</div>
                    <div class="cash-detail-value" id="cashProfit">0</div>
                </div>
            </div>
            <button class="reconcile-btn" onclick="showReconcileModal()">
                <span>ğŸ”„</span> á€…á€¬á€›á€„á€ºá€¸á€‘á€Šá€·á€º/á€…á€…á€º
            </button>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions no-select">
            <button class="quick-action-btn" onclick="quickAction('service')">
                <span>â•</span> á€–á€¯á€”á€ºá€¸á€•á€¼á€¯á€•á€¼á€„á€º
            </button>
            <button class="quick-action-btn" onclick="quickAction('income')">
                <span>ğŸ’°</span> á€¡á€á€¼á€¬á€¸á€á€„á€ºá€„á€½á€±
            </button>
            <button class="quick-action-btn" onclick="quickAction('expense')">
                <span>ğŸ“‰</span> á€¡á€á€¯á€¶á€¸á€…á€¬á€›á€„á€ºá€¸
            </button>
            <button class="quick-action-btn" onclick="quickAction('report')">
                <span>ğŸ“Š</span> á€…á€¬á€›á€„á€ºá€¸á€á€»á€¯á€•á€º
            </button>
        </div>

        <!-- Alert -->
        <div id="alert" class="alert"></div>

        <!-- Services Tab -->
        <div id="services-tab" class="tab-content active">
            <h2 class="section-title">
                <span>ğŸ› ï¸</span> á€–á€¯á€”á€ºá€¸á€•á€¼á€¯á€•á€¼á€„á€ºá€á€¼á€„á€ºá€¸á€™á€»á€¬á€¸
            </h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">á€šá€”á€±á€· á€•á€¼á€¯á€•á€¼á€„á€ºá€™á€¾á€¯</div>
                    <div class="stat-number" id="todayServices">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">á€á€„á€ºá€„á€½á€±</div>
                    <div class="stat-number income" id="todayServiceIncome">0 á€€á€»á€•á€º</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">á€¡á€™á€¼á€á€º</div>
                    <div class="stat-number profit" id="todayServiceProfit">0 á€€á€»á€•á€º</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">á€†á€­á€¯á€„á€ºá€¸á€„á€¶á€·á€”á€±á€†á€²</div>
                    <div class="stat-number" id="pendingServices">0</div>
                </div>
            </div>

            <!-- Service Form -->
            <div class="form-section">
                <h3>â• á€–á€¯á€”á€ºá€¸á€•á€¼á€¯á€•á€¼á€„á€ºá€…á€¬á€›á€„á€ºá€¸á€¡á€á€…á€º</h3>
                <form id="serviceForm">
                    <div class="form-group">
                        <label>á€•á€¼á€¯á€•á€¼á€„á€ºá€á€¼á€„á€ºá€¸á€¡á€€á€¼á€±á€¬á€„á€ºá€¸á€¡á€›á€¬</label>
                        <select id="serviceType" required>
                            <option value="">á€›á€½á€±á€¸á€•á€«...</option>
                            <option value="á€–á€¯á€”á€ºá€¸á€•á€¼á€¯á€•á€¼á€„á€ºá€á€¼á€„á€ºá€¸">ğŸ“± á€–á€¯á€”á€ºá€¸á€•á€¼á€¯á€•á€¼á€„á€ºá€á€¼á€„á€ºá€¸</option>
                            <option value="Touch&LCD á€œá€²á€á€¼á€„á€ºá€¸">Touch&LCD á€œá€²á€á€¼á€„á€ºá€¸</option>
                            <option value="Battery">ğŸ”‹ Battery</option>
                            <option value="á€†á€±á€¬á€·á€á€²á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€á€¼á€„á€ºá€¸">ğŸ“² á€†á€±á€¬á€·á€á€²á€‘á€Šá€·á€º</option>
                            <option value="á€¡á€á€¼á€¬á€¸">ğŸ”„ á€¡á€á€¼á€¬á€¸</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>á€•á€¼á€¯á€•á€¼á€„á€ºá€á€°á€¡á€™á€Šá€º</label>
                        <input type="text" id="serviceCustomer" placeholder="á€¥á€•á€™á€¬ - á€¦á€¸á€¡á€±á€¬á€„á€º" required>
                    </div>
                    <div class="form-group">
                        <label>á€–á€¯á€”á€ºá€¸á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</label>
                        <input type="text" id="servicePhone" placeholder="á€¥á€•á€™á€¬ - iPhone 13">
                    </div>
                    
                    <div class="cost-breakdown">
                        <h4 style="margin-bottom: 12px;">ğŸ“¦ á€€á€¯á€”á€ºá€€á€»á€…á€›á€­á€á€º</h4>
                        <div class="cost-item">
                            <span>á€•á€…á€¹á€…á€Šá€ºá€¸á€¡á€›á€„á€ºá€¸</span>
                            <input type="number" id="materialCost" value="35000" onchange="updateServiceCost()" step="1000" min="0">
                        </div>
                        <div id="additionalCosts"></div>
                        <div class="cost-item cost-total">
                            <span>á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€€á€¯á€”á€ºá€€á€»</span>
                            <span id="totalCostDisplay">35,000 á€€á€»á€•á€º</span>
                        </div>
                        <button type="button" class="btn btn-sm" style="margin-top: 12px;" onclick="showAddCostModal()">â• á€¡á€á€¼á€¬á€¸á€€á€¯á€”á€ºá€€á€»á€…á€›á€­á€á€º</button>
                    </div>

                    <div class="form-group">
                        <label>á€œá€€á€ºá€ (á€¡á€™á€¼á€á€º)</label>
                        <input type="number" id="laborCost" value="20000" onchange="calculateTotalFee()" step="1000" min="0">
                    </div>

                    <div class="form-group">
                        <label>á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€€á€»á€á€„á€·á€ºá€„á€½á€±</label>
                        <input type="number" id="totalFee" value="55000" required step="1000" min="0">
                    </div>

                    <div class="profit-display">
                        <div class="profit-item">
                            <span>ğŸ’° á€¡á€™á€¼á€á€ºá€„á€½á€±</span>
                            <span class="profit-value" id="profitDisplay">20,000 á€€á€»á€•á€º</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>á€¡á€á€¼á€±á€¡á€”á€±</label>
                        <select id="serviceStatus">
                            <option value="pending">â³ á€†á€­á€¯á€„á€ºá€¸á€„á€¶á€·á€†á€²</option>
                            <option value="in-progress">ğŸ”„ á€•á€¼á€¯á€•á€¼á€„á€ºá€”á€±á€†á€²</option>
                            <option value="completed">âœ… á€•á€¼á€®á€¸á€…á€®á€¸</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>á€™á€¾á€á€ºá€á€»á€€á€º</label>
                        <textarea id="serviceNote" rows="2" placeholder="á€™á€¾á€á€ºá€á€»á€€á€ºá€™á€»á€¬á€¸..."></textarea>
                    </div>

                    <button type="submit" class="btn">âœ… á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯á€‘á€Šá€·á€ºá€™á€Šá€º</button>
                </form>
            </div>

            <!-- Service List -->
            <div class="form-section">
                <h3>ğŸ“‹ á€šá€”á€±á€· Phone Services á€…á€¬á€›á€„á€ºá€¸</h3>
                <div class="filter-section">
                    <select class="filter-input" id="serviceStatusFilter" onchange="filterServices()">
                        <option value="all">ğŸ“‹ á€¡á€¬á€¸á€œá€¯á€¶á€¸</option>
                        <option value="pending">â³ á€†á€­á€¯á€„á€ºá€¸á€„á€¶á€·á€†á€²</option>
                        <option value="in-progress">ğŸ”„ á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€±á€†á€²</option>
                        <option value="completed">âœ… á€•á€¼á€®á€¸á€…á€®á€¸</option>
                    </select>
                    <input type="text" class="filter-input" id="serviceSearch" placeholder="ğŸ” á€›á€¾á€¬á€›á€”á€º...">
                </div>

                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>á€¡á€á€»á€­á€”á€º</th>
                                <th>á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯</th>
                                <th>á€–á€±á€¬á€€á€ºá€á€Šá€º</th>
                                <th>á€–á€¯á€”á€ºá€¸</th>
                                <th>á€€á€¯á€”á€ºá€€á€»</th>
                                <th>á€€á€»á€á€„á€·á€º</th>
                                <th>á€¡á€™á€¼á€á€º</th>
                                <th>á€¡á€á€¼á€±á€¡á€”á€±</th>
                                <th>á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€»á€€á€º</th>
                            </tr>
                        </thead>
                        <tbody id="servicesBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Other Income Tab -->
        <div id="other-income-tab" class="tab-content">
            <h2 class="section-title">
                <span>ğŸ’°</span> á€¡á€á€¼á€¬á€¸á€›á€›á€¾á€­á€„á€½á€±
            </h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">á€šá€”á€±á€·á€¡á€á€¼á€¬á€¸á€›á€›á€¾á€­á€„á€½á€±</div>
                    <div class="stat-number income" id="todayOtherIncome">0 á€€á€»á€•á€º</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">á€¡á€€á€¼á€­á€™á€ºá€›á€±</div>
                    <div class="stat-number" id="todayOtherIncomeCount">0</div>
                </div>
            </div>

            <div class="form-section">
                <h3>ğŸ’° á€¡á€á€¼á€¬á€¸á€›á€›á€¾á€­á€„á€½á€±á€á€½á€„á€ºá€¸á€›á€”á€º</h3>
                <form id="otherIncomeForm">
                    <div class="form-group">
                        <label>á€›á€›á€¾á€­á€„á€½á€±á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</label>
                        <select id="otherIncomeType" required>
                            <option value="">á€›á€½á€±á€¸á€•á€«...</option>
                            <option value="á€¡á€€á€¼á€½á€±á€¸á€†á€•á€ºá€„á€½á€±">ğŸ’³ á€¡á€€á€¼á€½á€±á€¸á€†á€•á€ºá€„á€½á€±</option>
                            <option value="á€•á€…á€¹á€…á€Šá€ºá€¸á€›á€±á€¬á€„á€ºá€¸á€„á€½á€±">ğŸ“¦ á€•á€…á€¹á€…á€Šá€ºá€¸á€›á€±á€¬á€„á€ºá€¸á€„á€½á€±</option>
                            <option value="á€¡á€¬á€™á€á€¶á€„á€½á€±">ğŸ›¡ï¸ á€¡á€¬á€™á€á€¶á€„á€½á€±</option>
                            <option value="á€¡á€á€¼á€¬á€¸á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯á€">ğŸ› ï¸ á€¡á€á€¼á€¬á€¸á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯á€</option>
                            <option value="á€¡á€á€¼á€¬á€¸">ğŸ”„ á€¡á€á€¼á€¬á€¸</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>á€„á€½á€±á€•á€™á€¬á€ (á€€á€»á€•á€º)</label>
                        <input type="number" id="otherIncomeAmount" placeholder="á€¥á€•á€™á€¬ - 50000" required step="1000" min="0">
                    </div>
                    <div class="form-group">
                        <label>á€›á€›á€¾á€­á€á€Šá€·á€ºá€”á€±á€›á€¬/á€¡á€€á€¼á€±á€¬á€„á€ºá€¸á€¡á€›á€¬</label>
                        <input type="text" id="otherIncomeSource" placeholder="á€¥á€•á€™á€¬ - á€¦á€¸á€™á€¼á€„á€·á€º" required>
                    </div>
                    <div class="form-group">
                        <label>á€™á€¾á€á€ºá€á€»á€€á€º</label>
                        <textarea id="otherIncomeNote" rows="2" placeholder="á€™á€¾á€á€ºá€á€»á€€á€º..."></textarea>
                    </div>
                    <button type="submit" class="btn">âœ… á€¡á€á€¼á€¬á€¸á€›á€›á€¾á€­á€„á€½á€±á€á€½á€„á€ºá€¸á€™á€Šá€º</button>
                </form>
            </div>

            <div class="form-section">
                <h3>ğŸ“‹ á€šá€”á€±á€·á€¡á€á€¼á€¬á€¸á€›á€›á€¾á€­á€„á€½á€±á€…á€¬á€›á€„á€ºá€¸</h3>
                <div class="filter-section">
                    <select class="filter-input" id="otherIncomeTypeFilter" onchange="filterOtherIncome()">
                        <option value="all">ğŸ“‹ á€¡á€¬á€¸á€œá€¯á€¶á€¸</option>
                        <option value="á€¡á€€á€¼á€½á€±á€¸á€†á€•á€ºá€„á€½á€±">ğŸ’³ á€¡á€€á€¼á€½á€±á€¸á€†á€•á€º</option>
                        <option value="á€•á€…á€¹á€…á€Šá€ºá€¸á€›á€±á€¬á€„á€ºá€¸á€„á€½á€±">ğŸ“¦ á€•á€…á€¹á€…á€Šá€ºá€¸á€›á€±á€¬á€„á€ºá€¸</option>
                        <option value="á€¡á€¬á€™á€á€¶á€„á€½á€±">ğŸ›¡ï¸ á€¡á€¬á€™á€á€¶</option>
                        <option value="á€¡á€á€¼á€¬á€¸á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯á€">ğŸ› ï¸ á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯á€</option>
                    </select>
                </div>

                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>á€¡á€á€»á€­á€”á€º</th>
                                <th>á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</th>
                                <th>á€„á€½á€±á€•á€™á€¬á€</th>
                                <th>á€›á€›á€¾á€­á€á€Šá€·á€ºá€”á€±á€›á€¬</th>
                                <th>á€™á€¾á€á€ºá€á€»á€€á€º</th>
                                <th>á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€»á€€á€º</th>
                            </tr>
                        </thead>
                        <tbody id="otherIncomeBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Expenses Tab -->
        <div id="expenses-tab" class="tab-content">
            <h2 class="section-title">
                <span>ğŸ“‰</span> á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€ºá€…á€¬á€›á€„á€ºá€¸
            </h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">á€šá€”á€±á€·á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€º</div>
                    <div class="stat-number expense" id="todayExpenseTotal">0 á€€á€»á€•á€º</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">á€¡á€€á€¼á€­á€™á€ºá€›á€±</div>
                    <div class="stat-number" id="todayExpenseCount">0</div>
                </div>
            </div>

            <div class="form-section">
                <h3>ğŸ“ á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€ºá€á€½á€„á€ºá€¸á€›á€”á€º</h3>
                <form id="expenseForm">
                    <div class="form-group">
                        <label>á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</label>
                        <select id="expenseType" required>
                            <option value="">á€›á€½á€±á€¸á€•á€«...</option>
                            <option value="á€ˆá€±á€¸á€–á€­á€¯á€¸">ğŸ›’ á€ˆá€±á€¸á€–á€­á€¯á€¸</option>
                            <option value="á€œá€»á€¾á€•á€ºá€…á€…á€ºá€™á€®á€¸">âš¡ á€œá€»á€¾á€•á€ºá€…á€…á€ºá€™á€®á€¸</option>
                            <option value="á€›á€±">ğŸ’§ á€›á€±</option>
                            <option value="á€¡á€„á€ºá€á€¬á€”á€€á€º">ğŸŒ á€¡á€„á€ºá€á€¬á€”á€€á€º</option>
                            <option value="á€œá€…á€¬">ğŸ‘¥ á€œá€…á€¬</option>
                            <option value="á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸á€á€šá€º">ğŸ“¦ á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸á€á€šá€º</option>
                            <option value="á€¡á€á€¼á€¬á€¸">ğŸ”„ á€¡á€á€¼á€¬á€¸</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>á€„á€½á€±á€•á€™á€¬á€ (á€€á€»á€•á€º)</label>
                        <input type="number" id="expenseAmount" placeholder="á€¥á€•á€™á€¬ - 30000" required step="1000" min="0">
                    </div>
                    <div class="form-group">
                        <label>á€¡á€€á€¼á€±á€¬á€„á€ºá€¸á€¡á€›á€¬</label>
                        <input type="text" id="expenseDescription" placeholder="á€¥á€•á€™á€¬ - á€†á€­á€¯á€„á€ºá€á€½á€”á€º" required>
                    </div>
                    <div class="form-group">
                        <label>á€™á€¾á€á€ºá€á€»á€€á€º</label>
                        <textarea id="expenseNote" rows="2" placeholder="á€™á€¾á€á€ºá€á€»á€€á€º..."></textarea>
                    </div>
                    <button type="submit" class="btn">âœ… á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€ºá€á€½á€„á€ºá€¸á€™á€Šá€º</button>
                </form>
            </div>

            <div class="form-section">
                <h3>ğŸ“‹ á€šá€”á€±á€·á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€ºá€…á€¬á€›á€„á€ºá€¸</h3>
                <div class="filter-section">
                    <select class="filter-input" id="expenseTypeFilter" onchange="filterExpenses()">
                        <option value="all">ğŸ“‹ á€¡á€¬á€¸á€œá€¯á€¶á€¸</option>
                        <option value="á€ˆá€±á€¸á€–á€­á€¯á€¸">ğŸ›’ á€ˆá€±á€¸á€–á€­á€¯á€¸</option>
                        <option value="á€…á€¯á€„á€½á€±">á€…á€¯á€„á€½á€±</option>
                        <option value="á€œá€»á€¾á€•á€ºá€…á€…á€ºá€™á€®á€¸">âš¡ á€™á€®á€¸</option>
                        <option value="á€›á€±">ğŸ’§ á€›á€±</option>
                        <option value="á€¡á€„á€ºá€á€¬á€”á€€á€º">ğŸŒ á€¡á€„á€ºá€á€¬á€”á€€á€º</option>
                        <option value="á€œá€…á€¬">ğŸ‘¥ á€œá€…á€¬</option>
                        <option value="á€€á€¯á€”á€ºá€•á€…á€¹á€…á€Šá€ºá€¸á€á€šá€º">ğŸ“¦ á€€á€¯á€”á€ºá€á€šá€º</option>
                    </select>
                </div>

                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>á€¡á€á€»á€­á€”á€º</th>
                                <th>á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</th>
                                <th>á€„á€½á€±á€•á€™á€¬á€</th>
                                <th>á€¡á€€á€¼á€±á€¬á€„á€ºá€¸á€¡á€›á€¬</th>
                                <th>á€™á€¾á€á€ºá€á€»á€€á€º</th>
                                <th>á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€»á€€á€º</th>
                            </tr>
                        </thead>
                        <tbody id="expensesBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports-tab" class="tab-content">
            <h2 class="section-title">
                <span>ğŸ“Š</span> á€…á€¬á€›á€„á€ºá€¸á€á€»á€¯á€•á€º
            </h2>

            <div class="filter-section">
                <select id="reportPeriod" onchange="changeReportPeriod()" class="filter-input">
                    <option value="daily">ğŸ“… á€”á€±á€·á€…á€‰á€º</option>
                    <option value="monthly">ğŸ“† á€œá€…á€‰á€º</option>
                    <option value="yearly">ğŸ“… á€”á€¾á€…á€ºá€…á€‰á€º</option>
                </select>
                <input type="month" id="monthPicker" class="filter-input" style="display: none;">
            </div>

            <div class="report-grid">
                <div class="report-card">
                    <div class="report-card-title">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€á€„á€ºá€„á€½á€±</div>
                    <div class="report-card-value income" id="reportTotalIncome">0 á€€á€»á€•á€º</div>
                </div>
                <div class="report-card">
                    <div class="report-card-title">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€¡á€á€¯á€¶á€¸</div>
                    <div class="report-card-value expense" id="reportTotalExpense">0 á€€á€»á€•á€º</div>
                </div>
                <div class="report-card">
                    <div class="report-card-title">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€¡á€™á€¼á€á€º</div>
                    <div class="report-card-value profit" id="reportTotalProfit">0 á€€á€»á€•á€º</div>
                </div>
                <div class="report-card">
                    <div class="report-card-title">á€–á€¯á€”á€ºá€¸á€•á€¼á€¯á€•á€¼á€„á€ºá€™á€¾á€¯á€¡á€™á€¼á€á€º</div>
                    <div class="report-card-value profit" id="reportServiceProfit">0 á€€á€»á€•á€º</div>
                </div>
            </div>

            <div class="report-grid">
                <div class="report-card" style="background: #fef3c7;">
                    <div class="report-card-title">â³ á€†á€­á€¯á€„á€ºá€¸á€„á€¶á€·á€†á€²</div>
                    <div class="report-card-value" id="reportPendingServices">0</div>
                </div>
                <div class="report-card" style="background: #dbeafe;">
                    <div class="report-card-title">ğŸ”„ á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€±á€†á€²</div>
                    <div class="report-card-value" id="reportInProgressServices">0</div>
                </div>
                <div class="report-card" style="background: #d1fae5;">
                    <div class="report-card-title">âœ… á€•á€¼á€®á€¸á€…á€®á€¸</div>
                    <div class="report-card-value" id="reportCompletedServices">0</div>
                </div>
                <div class="report-card" style="background: #f1f5f9;">
                    <div class="report-card-title">ğŸ“Š á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸</div>
                    <div class="report-card-value" id="reportTotalServices">0</div>
                </div>
            </div>

            <div class="form-section">
                <h3>ğŸ“‹ á€¡á€á€±á€¸á€…á€­á€á€ºá€…á€¬á€›á€„á€ºá€¸</h3>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>á€›á€€á€ºá€…á€½á€²</th>
                                <th>á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</th>
                                <th>á€¡á€€á€¼á€±á€¬á€„á€ºá€¸á€¡á€›á€¬</th>
                                <th>á€á€„á€ºá€„á€½á€±</th>
                                <th>á€¡á€á€¯á€¶á€¸</th>
                                <th>á€¡á€™á€¼á€á€º</th>
                            </tr>
                        </thead>
                        <tbody id="reportBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" onclick="scrollToTop()" id="fabBtn">â†‘</button>

    <!-- Bottom Navigation -->
    <div class="bottom-nav no-select">
        <button class="bottom-nav-btn active" onclick="switchTab('services')">
            <span>ğŸ› ï¸</span> á€–á€¯á€”á€ºá€¸á€•á€¼á€¯á€•á€¼á€„á€º
        </button>
        <button class="bottom-nav-btn" onclick="switchTab('other-income')">
            <span>ğŸ’°</span> á€¡á€á€¼á€¬á€¸á€á€„á€ºá€„á€½á€±
        </button>
        <button class="bottom-nav-btn" onclick="switchTab('expenses')">
            <span>ğŸ“‰</span> á€¡á€á€¯á€¶á€¸á€…á€¬á€›á€„á€ºá€¸
        </button>
        <button class="bottom-nav-btn" onclick="switchTab('reports')">
            <span>ğŸ“Š</span> á€…á€¬á€›á€„á€ºá€¸á€á€»á€¯á€•á€º
        </button>
    </div>

    <!-- Modals -->
    <div id="costModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>â• á€¡á€á€¼á€¬á€¸á€€á€¯á€”á€ºá€€á€»á€…á€›á€­á€á€º</h3>
                <span class="close" onclick="closeCostModal()">&times;</span>
            </div>
            <form id="costForm">
                <div class="form-group">
                    <label>á€€á€¯á€”á€ºá€€á€»á€…á€›á€­á€á€ºá€¡á€™á€Šá€º</label>
                    <input type="text" id="costName" placeholder="á€¥á€•á€™á€¬ - á€€á€»á€±á€¬á€€á€ºá€á€²" required>
                </div>
                <div class="form-group">
                    <label>á€„á€½á€±á€•á€™á€¬á€ (á€€á€»á€•á€º)</label>
                    <input type="number" id="costAmount" placeholder="á€¥á€•á€™á€¬ - 5000" required step="1000" min="0">
                </div>
                <button type="submit" class="btn">âœ… á€‘á€Šá€·á€ºá€™á€Šá€º</button>
            </form>
        </div>
    </div>

   <div id="reconcileModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>ğŸ”„ á€…á€¬á€›á€„á€ºá€¸á€€á€­á€¯á€€á€ºá€›á€”á€º</h3>
            <span class="close" onclick="closeReconcileModal()">&times;</span>
        </div>
        <div style="max-height: 70vh; overflow-y: auto; padding: 0 5px;">
            <!-- á€¡á€–á€½á€„á€·á€ºá€„á€½á€± -->
            <div class="form-group" style="background: #f0f9ff; padding: 15px; border-radius: 20px; margin-bottom: 20px; border: 2px solid #bae6fd;">
                <label style="font-size: 16px; color: #0369a1;">ğŸ’° á€¡á€–á€½á€„á€·á€ºá€„á€½á€± (á€•á€¼á€„á€ºá€†á€„á€ºá€›á€”á€º)</label>
                <input type="number" id="openingBalanceInput" value="0" step="1000" style="font-size: 18px; font-weight: bold; color: #0369a1;">
            </div>
            
            <!-- á€á€„á€ºá€„á€½á€±/á€¡á€á€¯á€¶á€¸ -->
            <div class="form-group">
                <label>ğŸ“ˆ á€šá€”á€±á€·á€á€„á€ºá€„á€½á€±</label>
                <input type="number" id="todayTotalIncome" readonly style="background: #f1f5f9; font-weight: 600;">
            </div>
            <div class="form-group">
                <label>ğŸ“‰ á€šá€”á€±á€·á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€º</label>
                <input type="number" id="todayTotalExpense" readonly style="background: #f1f5f9; font-weight: 600;">
            </div>
            
            <!-- á€…á€”á€…á€ºá€á€½á€€á€ºá€œá€€á€ºá€€á€»á€”á€º -->
            <div class="form-group" style="background: #e0f2fe; padding: 15px; border-radius: 20px; margin-bottom: 20px;">
                <label style="font-size: 16px; color: #0369a1;">âš–ï¸ á€…á€”á€…á€ºá€á€½á€€á€ºá€œá€€á€ºá€€á€»á€”á€º</label>
                <input type="number" id="systemCalculatedBalance" readonly style="background: #f1f5f9; font-size: 18px; font-weight: bold; color: #0369a1;">
            </div>
            
            <!-- á€œá€€á€ºá€›á€¾á€­á€„á€½á€± -->
            <div class="form-group" style="background: #fef3c7; padding: 15px; border-radius: 20px; margin-bottom: 20px;">
                <label style="font-size: 16px; color: #92400e;">ğŸ’µ á€œá€€á€ºá€›á€¾á€­á€„á€½á€± (á€‘á€Šá€·á€ºá€•á€«)</label>
                <input type="number" id="actualCash" placeholder="á€œá€€á€ºá€›á€¾á€­á€„á€½á€±á€‘á€Šá€·á€ºá€•á€«" step="1000" style="font-size: 18px; font-weight: bold; color: #92400e;">
            </div>
            
            <!-- á€€á€½á€¬á€á€¼á€¬á€¸á€á€»á€€á€º -->
            <div id="reconcileDifference" style="padding: 15px; border-radius: 20px; margin: 15px 0; text-align: center; font-weight: bold; font-size: 16px;"></div>
            
            <!-- á€á€œá€¯á€á€ºá€™á€»á€¬á€¸ -->
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn btn-success" onclick="saveOpeningBalance()" style="flex: 1; min-width: 100px;">ğŸ’¾ á€á€­á€™á€ºá€¸</button>
                <button class="btn" onclick="calculateDifference()" style="flex: 1; min-width: 100px; background: #2563eb;">âš–ï¸ á€á€½á€€á€º</button>
                <button class="btn btn-danger" onclick="closeReconcileModal()" style="flex: 1; min-width: 100px;">âŒ á€•á€­á€á€º</button>
            </div>
        </div>
    </div>
</div>

    <script>
        // Storage Keys
        const STORAGE_KEYS = {
            SERVICES: 'pos_services_v4',
            OTHER_INCOME: 'pos_other_income_v4',
            EXPENSES: 'pos_expenses_v4',
            OPENING_BALANCE: 'pos_opening_balance_v4'
        };

        // Data Arrays
        let services = [];
        let otherIncome = [];
        let expenses = [];
        let openingBalance = 0;
        let currentDate = new Date().toISOString().split('T')[0];
        let editingId = null;
        let editingType = null;
        let serviceAdditionalCosts = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('datePicker').value = currentDate;
            loadData();
            updateCashBalance();
            
            const today = new Date();
            document.getElementById('monthPicker').value = today.toISOString().slice(0,7);
            
            // Show/hide FAB on scroll
            window.onscroll = function() {
                const fab = document.getElementById('fabBtn');
                if (window.pageYOffset > 300) {
                    fab.style.display = 'flex';
                } else {
                    fab.style.display = 'none';
                }
            };

            // Android back button
            if (window.navigator.userAgent.includes('Android')) {
                window.addEventListener('popstate', function() {
                    const modals = document.querySelectorAll('.modal');
                    modals.forEach(modal => {
                        if (modal.style.display === 'flex') {
                            modal.style.display = 'none';
                        }
                    });
                });
                history.pushState(null, null, location.href);
            }

            // Haptic feedback
            document.querySelectorAll('button, .quick-action-btn, .stat-card').forEach(btn => {
                btn.addEventListener('touchstart', function() {
                    if (window.navigator.vibrate) {
                        window.navigator.vibrate(5);
                    }
                });
            });

            // Pull to refresh
            let startY = 0;
            document.addEventListener('touchstart', (e) => {
                startY = e.touches[0].pageY;
            }, { passive: true });

            document.addEventListener('touchmove', (e) => {
                const currentY = e.touches[0].pageY;
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                if (scrollTop === 0 && currentY > startY + 50) {
                    e.preventDefault();
                    window.location.reload();
                }
            }, { passive: false });
        });

        // Quick Actions
        function quickAction(action) {
            switch(action) {
                case 'service':
                    switchTab('services');
                    setTimeout(() => {
                        document.getElementById('serviceForm').scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                    break;
                case 'income':
                    switchTab('other-income');
                    setTimeout(() => {
                        document.getElementById('otherIncomeForm').scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                    break;
                case 'expense':
                    switchTab('expenses');
                    setTimeout(() => {
                        document.getElementById('expenseForm').scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                    break;
                case 'report':
                    switchTab('reports');
                    break;
            }
            if (window.navigator.vibrate) window.navigator.vibrate(10);
        }

        // Scroll to top
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            if (window.navigator.vibrate) window.navigator.vibrate(10);
        }

        // Load Data
        function loadData() {
            try {
                services = JSON.parse(localStorage.getItem(STORAGE_KEYS.SERVICES)) || [];
                otherIncome = JSON.parse(localStorage.getItem(STORAGE_KEYS.OTHER_INCOME)) || [];
                expenses = JSON.parse(localStorage.getItem(STORAGE_KEYS.EXPENSES)) || [];
                
                const savedBalances = JSON.parse(localStorage.getItem(STORAGE_KEYS.OPENING_BALANCE)) || {};
                openingBalance = savedBalances[currentDate] || 0;
                
                displayServices();
                displayOtherIncome();
                displayExpenses();
                updateStats();
            } catch (e) {
                showAlert('á€’á€±á€á€¬á€–á€á€ºá€›á€¾á€¯á€›á€¬á€á€½á€„á€º á€¡á€™á€¾á€¬á€¸á€›á€¾á€­á€”á€±á€•á€«á€á€Šá€º', 'error');
            }
        }

        // Save Functions
        function saveServices() {
            localStorage.setItem(STORAGE_KEYS.SERVICES, JSON.stringify(services));
        }

        function saveOtherIncome() {
            localStorage.setItem(STORAGE_KEYS.OTHER_INCOME, JSON.stringify(otherIncome));
        }

        function saveExpenses() {
            localStorage.setItem(STORAGE_KEYS.EXPENSES, JSON.stringify(expenses));
        }

        // Show Alert
        function showAlert(message, type) {
            const alert = document.getElementById('alert');
            alert.className = `alert ${type}`;
            alert.textContent = message;
            alert.style.display = 'block';
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }

        // Tab Switching
        function switchTab(tabId) {
            document.querySelectorAll('.bottom-nav-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchTab('${tabId}')"]`).classList.add('active');
            document.getElementById(`${tabId}-tab`).classList.add('active');
            
            if (tabId === 'services') displayServices();
            else if (tabId === 'other-income') displayOtherIncome();
            else if (tabId === 'expenses') displayExpenses();
            else if (tabId === 'reports') loadReportData();
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Update Cash Balance
        function updateCashBalance() {
            const todayServices = services.filter(s => s.date === currentDate && s.status === 'completed');
            const todayOtherIncome = otherIncome.filter(o => o.date === currentDate);
            const todayExpenses = expenses.filter(e => e.date === currentDate);
            
            const serviceIncome = todayServices.reduce((sum, s) => sum + (s.totalFee || 0), 0);
            const otherIncomeTotal = todayOtherIncome.reduce((sum, o) => sum + (o.amount || 0), 0);
            const totalIncome = serviceIncome + otherIncomeTotal;
            
            const expense = todayExpenses.reduce((sum, e) => sum + e.amount, 0);
            const profit = totalIncome - expense;
            const balance = openingBalance + totalIncome - expense;
            
            document.getElementById('cashBalance').textContent = balance.toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('openingBalanceDisplay').textContent = openingBalance.toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('cashIncome').textContent = totalIncome.toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('cashExpense').textContent = expense.toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('cashProfit').textContent = profit.toLocaleString() + ' á€€á€»á€•á€º';
        }

        // Update Stats
        function updateStats() {
            const todayServices = services.filter(s => s.date === currentDate);
            const completedServices = todayServices.filter(s => s.status === 'completed');
            
            document.getElementById('todayServices').textContent = todayServices.length;
            document.getElementById('todayServiceIncome').textContent = 
                completedServices.reduce((sum, s) => sum + (s.totalFee || 0), 0).toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('todayServiceProfit').textContent = 
                completedServices.reduce((sum, s) => sum + (s.laborCost || 0), 0).toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('pendingServices').textContent = todayServices.filter(s => s.status === 'pending').length;
            
            const todayOtherIncome = otherIncome.filter(o => o.date === currentDate);
            document.getElementById('todayOtherIncome').textContent = 
                todayOtherIncome.reduce((sum, o) => sum + o.amount, 0).toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('todayOtherIncomeCount').textContent = todayOtherIncome.length;
            
            const todayExpenses = expenses.filter(e => e.date === currentDate);
            document.getElementById('todayExpenseTotal').textContent = 
                todayExpenses.reduce((sum, e) => sum + e.amount, 0).toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('todayExpenseCount').textContent = todayExpenses.length;
        }

        // Service Functions
        function updateServiceCost() {
            const materialCost = parseInt(document.getElementById('materialCost').value) || 0;
            const additionalTotal = serviceAdditionalCosts.reduce((sum, cost) => sum + cost.amount, 0);
            document.getElementById('totalCostDisplay').textContent = (materialCost + additionalTotal).toLocaleString() + ' á€€á€»á€•á€º';
            calculateTotalFee();
        }

        function calculateTotalFee() {
            const materialCost = parseInt(document.getElementById('materialCost').value) || 0;
            const additionalTotal = serviceAdditionalCosts.reduce((sum, cost) => sum + cost.amount, 0);
            const laborCost = parseInt(document.getElementById('laborCost').value) || 0;
            
            const totalFee = materialCost + additionalTotal + laborCost;
            document.getElementById('totalFee').value = totalFee;
            document.getElementById('profitDisplay').textContent = laborCost.toLocaleString() + ' á€€á€»á€•á€º';
        }

        function addAdditionalCost(name, amount) {
            serviceAdditionalCosts.push({ name, amount });
            updateAdditionalCostsDisplay();
            updateServiceCost();
        }

        function removeAdditionalCost(index) {
            serviceAdditionalCosts.splice(index, 1);
            updateAdditionalCostsDisplay();
            updateServiceCost();
        }

        function updateAdditionalCostsDisplay() {
            const container = document.getElementById('additionalCosts');
            if (!container) return;
            container.innerHTML = '';
            serviceAdditionalCosts.forEach((cost, index) => {
                const div = document.createElement('div');
                div.className = 'cost-item';
                div.innerHTML = `
                    <span>${cost.name}</span>
                    <span>${cost.amount.toLocaleString()} á€€á€»á€•á€º
                        <button type="button" onclick="removeAdditionalCost(${index})" style="background: none; border: none; color: #dc2626; font-size: 18px; padding: 0 8px;">âœ•</button>
                    </span>
                `;
                container.appendChild(div);
            });
        }

        function displayServices() {
            const tbody = document.getElementById('servicesBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const filterStatus = document.getElementById('serviceStatusFilter')?.value || 'all';
            const searchText = document.getElementById('serviceSearch')?.value.toLowerCase() || '';
            
            let filteredServices = services.filter(s => s.date === currentDate);
            
            if (filterStatus !== 'all') {
                filteredServices = filteredServices.filter(s => s.status === filterStatus);
            }
            
            if (searchText) {
                filteredServices = filteredServices.filter(s => 
                    (s.customer && s.customer.toLowerCase().includes(searchText)) ||
                    (s.type && s.type.toLowerCase().includes(searchText))
                );
            }
            
            filteredServices.sort((a, b) => (b.time || '').localeCompare(a.time || ''));
            
            filteredServices.forEach(service => {
                const row = tbody.insertRow();
                const totalCost = (service.materialCost || 0) + (service.additionalCosts ? service.additionalCosts.reduce((a, b) => a + b.amount, 0) : 0);
                
                let statusClass = 'pending';
                let statusText = 'á€†á€­á€¯á€„á€ºá€¸á€„á€¶á€·á€†á€²';
                
                if (service.status === 'completed') {
                    statusClass = 'completed';
                    statusText = 'á€•á€¼á€®á€¸á€…á€®á€¸';
                } else if (service.status === 'in-progress') {
                    statusClass = 'progress';
                    statusText = 'á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€±á€†á€²';
                }
                
                row.innerHTML = `
                    <td>${service.time || '-'}</td>
                    <td>${service.type || '-'}</td>
                    <td>${service.customer || '-'}</td>
                    <td>${service.phone || '-'}</td>
                    <td>${totalCost.toLocaleString()}</td>
                    <td>${(service.totalFee || 0).toLocaleString()}</td>
                    <td style="color: #059669;">${(service.laborCost || 0).toLocaleString()}</td>
                    <td><span class="badge badge-${statusClass}">${statusText}</span></td>
                    <td class="action-btns">
                        <button class="action-btn edit-btn" onclick="editService(${service.id})">á€•á€¼á€„á€º</button>
                        <button class="action-btn delete-btn" onclick="deleteService(${service.id})">á€–á€»á€€á€º</button>
                    </td>
                `;
            });
            
            if (filteredServices.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; padding: 30px;">ğŸ“­ á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯á€™á€»á€¬á€¸ á€™á€›á€¾á€­á€á€±á€¸á€•á€«</td></tr>';
            }
        }

        function filterServices() {
            displayServices();
        }

        function displayOtherIncome() {
            const tbody = document.getElementById('otherIncomeBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const filterType = document.getElementById('otherIncomeTypeFilter')?.value || 'all';
            
            let filteredOtherIncome = otherIncome.filter(o => o.date === currentDate);
            
            if (filterType !== 'all') {
                filteredOtherIncome = filteredOtherIncome.filter(o => o.type === filterType);
            }
            
            filteredOtherIncome.sort((a, b) => (b.time || '').localeCompare(a.time || ''));
            
            filteredOtherIncome.forEach(income => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${income.time || '-'}</td>
                    <td>${income.type || '-'}</td>
                    <td style="color: #059669;">${(income.amount || 0).toLocaleString()}</td>
                    <td>${income.source || '-'}</td>
                    <td>${income.note || '-'}</td>
                    <td class="action-btns">
                        <button class="action-btn edit-btn" onclick="editOtherIncome(${income.id})">á€•á€¼á€„á€º</button>
                        <button class="action-btn delete-btn" onclick="deleteOtherIncome(${income.id})">á€–á€»á€€á€º</button>
                    </td>
                `;
            });
            
            if (filteredOtherIncome.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 30px;">ğŸ“­ á€¡á€á€¼á€¬á€¸á€›á€›á€¾á€­á€„á€½á€±á€™á€»á€¬á€¸ á€™á€›á€¾á€­á€á€±á€¸á€•á€«</td></tr>';
            }
        }

        function filterOtherIncome() {
            displayOtherIncome();
        }

        function displayExpenses() {
            const tbody = document.getElementById('expensesBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const filterType = document.getElementById('expenseTypeFilter')?.value || 'all';
            
            let filteredExpenses = expenses.filter(e => e.date === currentDate);
            
            if (filterType !== 'all') {
                filteredExpenses = filteredExpenses.filter(e => e.type === filterType);
            }
            
            filteredExpenses.sort((a, b) => (b.time || '').localeCompare(a.time || ''));
            
            filteredExpenses.forEach(expense => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${expense.time || '-'}</td>
                    <td>${expense.type || '-'}</td>
                    <td style="color: #dc2626;">${(expense.amount || 0).toLocaleString()}</td>
                    <td>${expense.description || '-'}</td>
                    <td>${expense.note || '-'}</td>
                    <td class="action-btns">
                        <button class="action-btn edit-btn" onclick="editExpense(${expense.id})">á€•á€¼á€„á€º</button>
                        <button class="action-btn delete-btn" onclick="deleteExpense(${expense.id})">á€–á€»á€€á€º</button>
                    </td>
                `;
            });
            
            if (filteredExpenses.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 30px;">ğŸ“­ á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€ºá€™á€»á€¬á€¸ á€™á€›á€¾á€­á€á€±á€¸á€•á€«</td></tr>';
            }
        }

        function filterExpenses() {
            displayExpenses();
        }

        // Report Functions
        function changeReportPeriod() {
            const period = document.getElementById('reportPeriod').value;
            document.getElementById('monthPicker').style.display = period === 'monthly' ? 'block' : 'none';
            loadReportData();
        }

        function loadReportData() {
            const period = document.getElementById('reportPeriod').value;
            let filteredServices = [], filteredOtherIncome = [], filteredExpenses = [];
            
            if (period === 'daily') {
                filteredServices = services.filter(s => s.date === currentDate);
                filteredOtherIncome = otherIncome.filter(o => o.date === currentDate);
                filteredExpenses = expenses.filter(e => e.date === currentDate);
            } else if (period === 'monthly') {
                const month = document.getElementById('monthPicker').value;
                if (month) {
                    filteredServices = services.filter(s => s.date && s.date.startsWith(month));
                    filteredOtherIncome = otherIncome.filter(o => o.date && o.date.startsWith(month));
                    filteredExpenses = expenses.filter(e => e.date && e.date.startsWith(month));
                }
            } else if (period === 'yearly') {
                const year = new Date().getFullYear().toString();
                filteredServices = services.filter(s => s.date && s.date.startsWith(year));
                filteredOtherIncome = otherIncome.filter(o => o.date && o.date.startsWith(year));
                filteredExpenses = expenses.filter(e => e.date && e.date.startsWith(year));
            }
            
            const completedServices = filteredServices.filter(s => s.status === 'completed');
            const serviceIncome = completedServices.reduce((sum, s) => sum + (s.totalFee || 0), 0);
            const otherIncomeTotal = filteredOtherIncome.reduce((sum, o) => sum + (o.amount || 0), 0);
            const totalIncome = serviceIncome + otherIncomeTotal;
            const totalExpense = filteredExpenses.reduce((sum, e) => sum + e.amount, 0);
            const serviceProfit = completedServices.reduce((sum, s) => sum + (s.laborCost || 0), 0);
            const totalProfit = totalIncome - totalExpense;
            
            document.getElementById('reportTotalIncome').textContent = totalIncome.toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('reportTotalExpense').textContent = totalExpense.toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('reportTotalProfit').textContent = totalProfit.toLocaleString() + ' á€€á€»á€•á€º';
            document.getElementById('reportServiceProfit').textContent = serviceProfit.toLocaleString() + ' á€€á€»á€•á€º';
            
            document.getElementById('reportPendingServices').textContent = filteredServices.filter(s => s.status === 'pending').length;
            document.getElementById('reportInProgressServices').textContent = filteredServices.filter(s => s.status === 'in-progress').length;
            document.getElementById('reportCompletedServices').textContent = filteredServices.filter(s => s.status === 'completed').length;
            document.getElementById('reportTotalServices').textContent = filteredServices.length;
            
            displayReportTable(completedServices, filteredOtherIncome, filteredExpenses);
        }

        function displayReportTable(services, otherIncome, expenses) {
            const tbody = document.getElementById('reportBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const allTransactions = [];
            
            services.forEach(s => {
                allTransactions.push({
                    date: s.date,
                    type: 'á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯',
                    description: `${s.type} - ${s.customer}`,
                    income: s.totalFee || 0,
                    expense: 0,
                    profit: s.laborCost || 0
                });
            });
            
            otherIncome.forEach(o => {
                allTransactions.push({
                    date: o.date,
                    type: 'á€¡á€á€¼á€¬á€¸á€›',
                    description: `${o.type} - ${o.source}`,
                    income: o.amount || 0,
                    expense: 0,
                    profit: o.amount || 0
                });
            });
            
            expenses.forEach(e => {
                allTransactions.push({
                    date: e.date,
                    type: 'á€¡á€á€¯á€¶á€¸',
                    description: `${e.type} - ${e.description}`,
                    income: 0,
                    expense: e.amount,
                    profit: -e.amount
                });
            });
            
            allTransactions.sort((a, b) => (b.date || '').localeCompare(a.date || ''));
            
            allTransactions.forEach(t => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${t.date || '-'}</td>
                    <td>${t.type}</td>
                    <td>${t.description}</td>
                    <td style="color: #059669;">${t.income ? t.income.toLocaleString() + 'á€€á€»á€•á€º' : '-'}</td>
                    <td style="color: #dc2626;">${t.expense ? t.expense.toLocaleString() + 'á€€á€»á€•á€º' : '-'}</td>
                    <td style="color: ${t.profit >= 0 ? '#059669' : '#dc2626'};">${Math.abs(t.profit).toLocaleString()}á€€á€»á€•á€º</td>
                `;
            });
            
            if (allTransactions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 30px;">ğŸ“­ á€…á€¬á€›á€„á€ºá€¸á€™á€»á€¬á€¸ á€™á€›á€¾á€­á€á€±á€¸á€•á€«</td></tr>';
            }
        }

        // Form Submits
        document.getElementById('serviceForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const service = {
                id: editingId && editingType === 'service' ? editingId : Date.now(),
                date: currentDate,
                time: new Date().toLocaleTimeString('my-MM', { hour: '2-digit', minute: '2-digit' }),
                type: document.getElementById('serviceType').value,
                customer: document.getElementById('serviceCustomer').value,
                phone: document.getElementById('servicePhone').value,
                materialCost: parseInt(document.getElementById('materialCost').value) || 0,
                additionalCosts: [...serviceAdditionalCosts],
                laborCost: parseInt(document.getElementById('laborCost').value) || 0,
                totalFee: parseInt(document.getElementById('totalFee').value),
                status: document.getElementById('serviceStatus').value,
                note: document.getElementById('serviceNote').value
            };

            if (editingId && editingType === 'service') {
                const index = services.findIndex(s => s.id === editingId);
                if (index !== -1) {
                    services[index] = service;
                    showAlert('âœ… á€•á€¼á€„á€ºá€†á€„á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
                }
                editingId = null;
                editingType = null;
            } else {
                services.push(service);
                showAlert('âœ… á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
            }

            saveServices();
            displayServices();
            updateStats();
            updateCashBalance();
            
            this.reset();
            serviceAdditionalCosts = [];
            updateAdditionalCostsDisplay();
            document.getElementById('materialCost').value = 35000;
            document.getElementById('laborCost').value = 20000;
            document.getElementById('totalFee').value = 55000;
            calculateTotalFee();
            if (window.navigator.vibrate) window.navigator.vibrate(20);
        });

        document.getElementById('otherIncomeForm')?.addEventListener('submit', function(e) {
            e.preventDefault();

            const income = {
                id: editingId && editingType === 'other-income' ? editingId : Date.now(),
                date: currentDate,
                time: new Date().toLocaleTimeString('my-MM', { hour: '2-digit', minute: '2-digit' }),
                type: document.getElementById('otherIncomeType').value,
                amount: parseInt(document.getElementById('otherIncomeAmount').value),
                source: document.getElementById('otherIncomeSource').value,
                note: document.getElementById('otherIncomeNote').value
            };

            if (editingId && editingType === 'other-income') {
                const index = otherIncome.findIndex(o => o.id === editingId);
                if (index !== -1) {
                    otherIncome[index] = income;
                    showAlert('âœ… á€•á€¼á€„á€ºá€†á€„á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
                }
                editingId = null;
                editingType = null;
            } else {
                otherIncome.push(income);
                showAlert('âœ… á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
            }

            saveOtherIncome();
            displayOtherIncome();
            updateStats();
            updateCashBalance();
            this.reset();
            if (window.navigator.vibrate) window.navigator.vibrate(20);
        });

        document.getElementById('expenseForm')?.addEventListener('submit', function(e) {
            e.preventDefault();

            const expense = {
                id: editingId && editingType === 'expense' ? editingId : Date.now(),
                date: currentDate,
                time: new Date().toLocaleTimeString('my-MM', { hour: '2-digit', minute: '2-digit' }),
                type: document.getElementById('expenseType').value,
                amount: parseInt(document.getElementById('expenseAmount').value),
                description: document.getElementById('expenseDescription').value,
                note: document.getElementById('expenseNote').value
            };

            if (editingId && editingType === 'expense') {
                const index = expenses.findIndex(e => e.id === editingId);
                if (index !== -1) {
                    expenses[index] = expense;
                    showAlert('âœ… á€•á€¼á€„á€ºá€†á€„á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
                }
                editingId = null;
                editingType = null;
            } else {
                expenses.push(expense);
                showAlert('âœ… á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
            }

            saveExpenses();
            displayExpenses();
            updateStats();
            updateCashBalance();
            this.reset();
            if (window.navigator.vibrate) window.navigator.vibrate(20);
        });

        document.getElementById('costForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('costName').value;
            const amount = parseInt(document.getElementById('costAmount').value);
            
            addAdditionalCost(name, amount);
            closeCostModal();
            document.getElementById('costForm').reset();
            showAlert('âœ… á€€á€¯á€”á€ºá€€á€»á€…á€›á€­á€á€º á€‘á€Šá€·á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
            if (window.navigator.vibrate) window.navigator.vibrate(20);
        });

        // Edit Functions
        function editService(id) {
            const service = services.find(s => s.id === id);
            if (service) {
                editingId = id;
                editingType = 'service';
                
                document.getElementById('serviceType').value = service.type || '';
                document.getElementById('serviceCustomer').value = service.customer || '';
                document.getElementById('servicePhone').value = service.phone || '';
                document.getElementById('materialCost').value = service.materialCost || 0;
                serviceAdditionalCosts = service.additionalCosts ? [...service.additionalCosts] : [];
                document.getElementById('laborCost').value = service.laborCost || 0;
                document.getElementById('totalFee').value = service.totalFee || 0;
                document.getElementById('serviceStatus').value = service.status || 'pending';
                document.getElementById('serviceNote').value = service.note || '';
                
                updateAdditionalCostsDisplay();
                updateServiceCost();
                
                switchTab('services');
                setTimeout(() => {
                    document.getElementById('serviceForm').scrollIntoView({ behavior: 'smooth' });
                }, 100);
                if (window.navigator.vibrate) window.navigator.vibrate(15);
            }
        }

        function editOtherIncome(id) {
            const income = otherIncome.find(o => o.id === id);
            if (income) {
                editingId = id;
                editingType = 'other-income';
                
                document.getElementById('otherIncomeType').value = income.type || '';
                document.getElementById('otherIncomeAmount').value = income.amount || 0;
                document.getElementById('otherIncomeSource').value = income.source || '';
                document.getElementById('otherIncomeNote').value = income.note || '';
                
                switchTab('other-income');
                setTimeout(() => {
                    document.getElementById('otherIncomeForm').scrollIntoView({ behavior: 'smooth' });
                }, 100);
                if (window.navigator.vibrate) window.navigator.vibrate(15);
            }
        }

        function editExpense(id) {
            const expense = expenses.find(e => e.id === id);
            if (expense) {
                editingId = id;
                editingType = 'expense';
                
                document.getElementById('expenseType').value = expense.type || '';
                document.getElementById('expenseAmount').value = expense.amount || 0;
                document.getElementById('expenseDescription').value = expense.description || '';
                document.getElementById('expenseNote').value = expense.note || '';
                
                switchTab('expenses');
                setTimeout(() => {
                    document.getElementById('expenseForm').scrollIntoView({ behavior: 'smooth' });
                }, 100);
                if (window.navigator.vibrate) window.navigator.vibrate(15);
            }
        }

        // Delete Functions
        function deleteService(id) {
            if (confirm('á€¤á€á€”á€ºá€†á€±á€¬á€„á€ºá€™á€¾á€¯á€€á€­á€¯ á€–á€»á€€á€ºá€™á€¾á€¬á€á€±á€á€»á€¬á€•á€«á€á€œá€¬á€¸?')) {
                services = services.filter(s => s.id !== id);
                saveServices();
                displayServices();
                updateStats();
                updateCashBalance();
                showAlert('ğŸ—‘ï¸ á€–á€»á€€á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
                if (window.navigator.vibrate) window.navigator.vibrate(30);
            }
        }

        function deleteOtherIncome(id) {
            if (confirm('á€¤á€¡á€á€¼á€¬á€¸á€›á€›á€¾á€­á€„á€½á€±á€€á€­á€¯ á€–á€»á€€á€ºá€™á€¾á€¬á€á€±á€á€»á€¬á€•á€«á€á€œá€¬á€¸?')) {
                otherIncome = otherIncome.filter(o => o.id !== id);
                saveOtherIncome();
                displayOtherIncome();
                updateStats();
                updateCashBalance();
                showAlert('ğŸ—‘ï¸ á€–á€»á€€á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
                if (window.navigator.vibrate) window.navigator.vibrate(30);
            }
        }

        function deleteExpense(id) {
            if (confirm('á€¤á€¡á€á€¯á€¶á€¸á€…á€›á€­á€á€ºá€€á€­á€¯ á€–á€»á€€á€ºá€™á€¾á€¬á€á€±á€á€»á€¬á€•á€«á€á€œá€¬á€¸?')) {
                expenses = expenses.filter(e => e.id !== id);
                saveExpenses();
                displayExpenses();
                updateStats();
                updateCashBalance();
                showAlert('ğŸ—‘ï¸ á€–á€»á€€á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
                if (window.navigator.vibrate) window.navigator.vibrate(30);
            }
        }

        // Date Functions
        function setToday() {
            document.getElementById('datePicker').value = new Date().toISOString().split('T')[0];
            loadDailyData();
        }

        function loadDailyData() {
            currentDate = document.getElementById('datePicker').value;
            
            const savedBalances = JSON.parse(localStorage.getItem(STORAGE_KEYS.OPENING_BALANCE)) || {};
            openingBalance = savedBalances[currentDate] || 0;
            
            displayServices();
            displayOtherIncome();
            displayExpenses();
            updateStats();
            updateCashBalance();
            
            showAlert(`ğŸ“… ${currentDate} á€¡á€á€½á€€á€º á€’á€±á€á€¬á€™á€»á€¬á€¸ á€•á€¼á€á€‘á€¬á€¸á€•á€«á€á€Šá€º`, 'success');
            if (window.navigator.vibrate) window.navigator.vibrate(10);
        }

        // Reconciliation Functions
        function showReconcileModal() {
            const todayServices = services.filter(s => s.date === currentDate && s.status === 'completed');
            const todayOtherIncome = otherIncome.filter(o => o.date === currentDate);
            const todayExpenses = expenses.filter(e => e.date === currentDate);
            
            const serviceIncome = todayServices.reduce((sum, s) => sum + (s.totalFee || 0), 0);
            const otherIncomeTotal = todayOtherIncome.reduce((sum, o) => sum + (o.amount || 0), 0);
            const income = serviceIncome + otherIncomeTotal;
            const expense = todayExpenses.reduce((sum, e) => sum + e.amount, 0);
            const calculatedBalance = openingBalance + income - expense;
            
            document.getElementById('openingBalanceInput').value = openingBalance;
            document.getElementById('todayTotalIncome').value = income;
            document.getElementById('todayTotalExpense').value = expense;
            document.getElementById('systemCalculatedBalance').value = calculatedBalance;
            document.getElementById('actualCash').value = '';
            document.getElementById('reconcileDifference').innerHTML = '';
            
            document.getElementById('reconcileModal').style.display = 'flex';
            history.pushState({ modal: true }, null);
            if (window.navigator.vibrate) window.navigator.vibrate(10);
        }

        function closeReconcileModal() {
            document.getElementById('reconcileModal').style.display = 'none';
        }

        function saveOpeningBalance() {
            const newBalance = parseInt(document.getElementById('openingBalanceInput').value);
            
            const savedBalances = JSON.parse(localStorage.getItem(STORAGE_KEYS.OPENING_BALANCE)) || {};
            savedBalances[currentDate] = newBalance;
            localStorage.setItem(STORAGE_KEYS.OPENING_BALANCE, JSON.stringify(savedBalances));
            
            openingBalance = newBalance;
            updateCashBalance();
            
            showAlert('ğŸ’¾ á€¡á€–á€½á€„á€·á€ºá€„á€½á€± á€á€­á€™á€ºá€¸á€†á€Šá€ºá€¸á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®', 'success');
            closeReconcileModal();
            if (window.navigator.vibrate) window.navigator.vibrate(20);
        }

        function calculateDifference() {
            const actualCash = parseInt(document.getElementById('actualCash').value);
            const systemCash = parseInt(document.getElementById('systemCalculatedBalance').value);
            
            const difference = actualCash - systemCash;
            const diffDiv = document.getElementById('reconcileDifference');
            
            if (difference === 0) {
                diffDiv.style.background = '#d1fae5';
                diffDiv.style.color = '#065f46';
                diffDiv.innerHTML = 'âœ… á€…á€¬á€›á€„á€ºá€¸á€€á€­á€¯á€€á€ºá€Šá€®á€•á€«á€á€Šá€º';
            } else if (difference > 0) {
                diffDiv.style.background = '#fef3c7';
                diffDiv.style.color = '#92400e';
                diffDiv.innerHTML = `ğŸ“ˆ á€•á€­á€¯á€”á€±á€á€Šá€º: ${difference.toLocaleString()} á€€á€»á€•á€º`;
            } else {
                diffDiv.style.background = '#fee2e2';
                diffDiv.style.color = '#991b1b';
                diffDiv.innerHTML = `ğŸ“‰ á€œá€­á€¯á€”á€±á€á€Šá€º: ${Math.abs(difference).toLocaleString()} á€€á€»á€•á€º`;
            }
            if (window.navigator.vibrate) window.navigator.vibrate(10);
        }

        // Modal Functions
        function showAddCostModal() {
            document.getElementById('costModal').style.display = 'flex';
            history.pushState({ modal: true }, null);
            if (window.navigator.vibrate) window.navigator.vibrate(10);
        }

        function closeCostModal() {
            document.getElementById('costModal').style.display = 'none';
            document.getElementById('costForm').reset();
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const costModal = document.getElementById('costModal');
            const reconcileModal = document.getElementById('reconcileModal');
            
            if (event.target === costModal) {
                closeCostModal();
            }
            if (event.target === reconcileModal) {
                closeReconcileModal();
            }
        }

        // Search Listener
        document.getElementById('serviceSearch')?.addEventListener('keyup', function(e) {
            if (e.key === 'Enter') filterServices();
        });
    </script>
</body>
</html>
